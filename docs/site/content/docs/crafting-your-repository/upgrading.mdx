---
title: 업그레이드
description: 저장소에 최신 개선 사항을 적용하기 위해 `turbo`를 업그레이드하는 방법을 알아봅니다.
---

import { PackageManagerTabs, Tab } from '#components/tabs';
import { Steps, Step } from '#components/steps';
import { Callout } from '#components/callout';

## 2.0으로 업그레이드

<Steps>
<Step>

### `turbo.json` 업데이트

다음을 실행하여 1.x에서 2.0으로 업그레이드를 시작합니다:

<PackageManagerTabs>

<Tab value="pnpm">

```bash title="Terminal"
pnpm dlx @turbo/codemod migrate
```

</Tab>

<Tab value="yarn">

```bash title="Terminal"
yarn dlx @turbo/codemod migrate
```

</Tab>

<Tab value="npm">

```bash title="Terminal"
npx @turbo/codemod migrate
```

</Tab>

<Tab value="bun (Beta)">

```bash title="Terminal"
bunx @turbo/codemod migrate
```

</Tab>

</PackageManagerTabs>

이는 1.x에서 2.0으로의 많은 주요 변경 사항에 대해 `turbo.json`을 업데이트합니다.

또한 `name` 필드가 없는 Workspace의 모든 `package.json`에 `name` 필드가 추가됩니다.

<Callout type="good-to-know">
  각 codemod를 개별적으로 수동으로 실행할 수도 있습니다. 자세한 내용은 [codemods
  페이지](/docs/reference/turbo-codemod#turborepo-2x)를 방문하세요.
</Callout>

</Step>

<Step>

### 루트 `package.json`에 `packageManager` 필드 추가

[`packageManager` 필드](https://nodejs.org/api/packages.html#packagemanager)는 Workspace에서 사용해야 하는 패키지 관리자를 정의하는 Node.js 생태계의 규칙입니다.

Turborepo 2.0은 코드베이스의 안정성과 동작 예측 가능성을 향상시키는 방법으로 Workspace가 이 필드를 정의하도록 요구합니다. 아직 없는 경우 루트 `package.json`에 이 필드를 추가합니다:

<PackageManagerTabs>

<Tab value="pnpm">

```diff title="./package.json"
{
+ "packageManager": "pnpm@9.2.0"
}
```

</Tab>

<Tab value="yarn">

```diff title="./package.json"
{
+ "packageManager": "yarn@1.22.19"
}
```

</Tab>

<Tab value="npm">

```diff title="./package.json"
{
+ "packageManager": "npm@10.8.1"
}
```

</Tab>

<Tab value="bun (Beta)">

```diff title="./package.json"
{
+ "packageManager": "bun@1.2.0"
}
```

</Tab>
</PackageManagerTabs>

</Step>
<Step>

### `eslint-config-turbo` 업데이트

[`eslint-config-turbo`](/docs/reference/eslint-config-turbo)는 캐싱을 위해 [`env`](/docs/reference/configuration#env) 키에 추가해야 하는 환경 변수를 식별하는 데 도움이 됩니다. 사용 중인 경우 메이저 버전과 일치하도록 업데이트해야 합니다.

</Step>

<Step>

### `turbo run` 명령 업데이트

Turborepo 2.0에는 `turbo run` 명령의 동작 및 정확성 개선이 포함되어 있습니다. 아래는 변경 사항의 요약이며, 코드베이스에 영향을 미칠 수도 있고 그렇지 않을 수도 있습니다:

- 환경 변수에 대한 Strict Mode가 이제 기본값이 되어 Loose Mode에서 이동함 ([PR](https://github.com/vercel/turborepo/pull/8182))
  - 작업의 스크립트에 환경 변수가 누락된 것으로 보이면 명령별로 [`--env-mode` 옵션](/docs/reference/run#--env-mode-option)을 사용하여 이 동작에서 다시 옵트아웃하여 점진적으로 마이그레이션할 수 있습니다. 가능한 한 빨리 `--env-mode` 옵션을 삭제할 수 있도록 작업의 모든 환경 변수를 고려하도록 [the `env` 키](/docs/reference/configuration#env)를 업데이트하는 것이 좋습니다.
  - 저장소의 기본값을 Loose Mode로 다시 설정하려면 [`envMode` 구성](/docs/reference/configuration#envmode)을 사용하여 설정할 수 있습니다.
- Workspace 루트 디렉토리는 이제 모든 패키지의 암시적 종속성임 ([PR](https://github.com/vercel/turborepo/pull/8202))
  - 루트의 변경 사항이 저장소의 모든 작업에 영향을 줄 수 있으므로 저장소는 루트에 가능한 한 적은 코드를 가져야 합니다. 또한 Workspace 루트에서 [Internal Package](/docs/core-concepts/internal-packages)를 사용하는 경우 해당 종속성에 대한 변경 사항도 모든 작업에 대한 캐시 미스를 유발합니다. 두 경우 모두 루트에서 코드를 이동하고 [패키지로 이동](/docs/crafting-your-repository/structuring-a-repository)하는 것을 고려하세요.
- `--filter` 및 아래 그래프 정확성 변경을 위해 `--ignore` 제거됨 ([PR](https://github.com/vercel/turborepo/pull/8201))
- `--scope` 플래그 제거됨 (1.2부터 더 이상 사용되지 않음) ([PR](https://github.com/vercel/turborepo/pull/7970))
- 루트 `package.json`의 `engines` 필드가 이제 해싱에 사용됨 ([PR](https://github.com/vercel/turborepo/pull/8173))
- `--filter`가 더 이상 패키지 이름에 대한 네임스페이스를 추론하지 않음 ([PR](https://github.com/vercel/turborepo/pull/8137))
- `--filter`는 이제 패키지 이름이나 디렉토리가 일치하지 않을 때 오류를 발생함 ([PR](https://github.com/vercel/turborepo/pull/8142))
- `--only`는 패키지 종속성 대신 작업 종속성을 제한함 ([PR](https://github.com/vercel/turborepo/pull/8163))

</Step>
</Steps>
