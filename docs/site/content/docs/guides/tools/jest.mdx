---
title: Jest
description: Turborepo에서 Jest를 사용하는 방법을 알아보세요.
---

import { Callout } from '#components/callout';
import { File, Folder, Files } from '#components/files';
import { PackageManagerTabs, Tabs, Tab } from '#components/tabs';
import { CreateTurboCallout } from './create-turbo-callout.tsx';

[Jest](https://jestjs.io/)는 방대한 생태계를 가진 일반적인 테스트 러너입니다. Turborepo와 통합하면 엄청난 속도 향상을 얻을 수 있습니다.

<CreateTurboCallout />

## 설정

다음과 같은 monorepo가 있다고 가정해 봅시다:

<Files>
  <Folder name="apps" defaultOpen>
    <Folder name="web" defaultOpen>
      <File name="package.json" />
    </Folder>
  </Folder>
  <Folder name="packages" defaultOpen>
    <Folder name="ui" defaultOpen>
      <File name="package.json" />
    </Folder>
  </Folder>
</Files>

테스트 스위트를 계획하는 패키지에 `jest`를 설치합니다. 이 예제에서는 `web`과 `@repo/ui`에 테스트가 있습니다:

<PackageManagerTabs>

<Tab value="pnpm">

```bash title="Terminal"
pnpm add jest --save-dev --filter=@repo/ui --filter=web
```

</Tab>

<Tab value="yarn">

```bash title="Terminal"
yarn workspace web add jest --dev
yarn workspace @repo/ui add jest --dev
```

</Tab>

<Tab value="npm">

```bash title="Terminal"
npm install jest --workspace=web --workspace=@repo/ui --save-dev
```

</Tab>

<Tab value="bun (Beta)">

```bash title="Terminal"
bun install jest --dev --filter=@repo/ui --filter=web
```

</Tab>
</PackageManagerTabs>

`apps/web`과 `packages/ui` 모두 자체 테스트 스위트가 있으므로 `package.json`에 `test` 스크립트를 추가합니다:

<Tabs items={["web", "@repo/ui"]}>
<Tab value="web">
```json title="./apps/web/package.json"
{
  "name": "web",
  "scripts": {
    "test": "jest"
  },
  "devDependencies": {
    "jest": "latest"
  }
}
```
</Tab>
<Tab value="@repo/ui">
```json title="./packages/ui/package.json"
{
  "name": "@repo/ui",
  "scripts": {
    "test": "jest"
  },
  "devDependencies": {
    "jest": "latest"
  }
}
```
</Tab>
</Tabs>

루트 `turbo.json` 내부에 `test` 작업을 만듭니다:

```json title="./turbo.json"
{
  "tasks": {
    "test": {}
  }
}
```

이제 `turbo test`는 각 패키지의 모든 테스트 스위트를 병렬화하고 캐시하여 변경된 코드만 테스트합니다.

## watch 모드에서 테스트 실행

테스트 스위트를 정상적으로 실행하면 완료되고 `stdout`에 출력됩니다. 즉, Turborepo로 [캐시할 수 있습니다](/docs/crafting-your-repository/caching).

하지만 watch 모드에서 테스트를 실행하면 프로세스가 종료되지 않습니다. 이로 인해 watch 작업은 [개발 작업](/docs/crafting-your-repository/developing-applications)과 더 비슷합니다.

이러한 차이로 인해 **두 개의 별도 Turborepo 작업**을 지정하는 것을 권장합니다: 하나는 테스트를 실행하는 것이고, 다른 하나는 Jest의 watch 모드에서 실행하는 것입니다. 각 워크스페이스의 각 `package.json` 파일 내부에:

<Tabs items={["web", "@repo/ui"]}>
<Tab value="web">
```json title="./apps/web/package.json"
{
  "name": "web",
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch" // [!code highlight]
  },
  "devDependencies": {
    "jest": "latest"
  }
}
```
</Tab>
<Tab value="@repo/ui">
```json title="./packages/ui/package.json"
{
  "name": "@repo/ui",
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch" // [!code highlight]
  },
  "devDependencies": {
    "jest": "latest"
  }
}
```
</Tab>
</Tabs>

루트 `turbo.json` 내부에:

```json title="./turbo.json"
{
  "tasks": {
    "test": {},
    "test:watch": {
      "cache": false, // [!code highlight]
      "persistent": true // [!code highlight]
    }
  }
}
```

[전역 `turbo`](/docs/getting-started/installation#global-installation)를 `turbo test:watch`로 사용하거나 루트 `package.json`의 스크립트에서 이 작업을 실행할 수 있습니다:

<Tabs items={["Global turbo", "./package.json"]}>
<Tab value="Global turbo">

```bash title="Terminal"
turbo test
```

```bash title="Terminal"
turbo test:watch
```

</Tab>

<Tab value="./package.json">

```json title="./package.json"
{
  "scripts": {
    "test": "turbo run test",
    "test:watch": "turbo run test:watch"
  }
}
```

</Tab>

</Tabs>
