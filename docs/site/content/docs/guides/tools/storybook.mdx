---
title: Storybook
description: Turborepo에서 Storybook을 사용하는 방법을 알아보세요.
---

import { PackageManagerTabs, Tab } from '#components/tabs';
import { Callout } from '#components/callout';
import { Steps, Step } from '#components/steps';

[Storybook](https://storybook.js.org/)은 격리된 환경에서 UI 컴포넌트를 빌드하는 인기 있는 방법입니다. Storybook을 Turborepo에 넣으면 애플리케이션과 함께 디자인 시스템을 쉽게 개발할 수 있습니다.

## 빠른 시작

템플릿을 사용하려는 경우, 이 가이드는 Vercel에서 [이 Storybook/Turborepo 템플릿](https://vercel.com/templates/react/turborepo-design-system)을 빌드하는 방법을 안내합니다.

<PackageManagerTabs>

<Tab value="pnpm">

```bash title="Terminal"
pnpm dlx create-turbo@latest -e design-system
```

</Tab>

<Tab value="yarn">

```bash title="Terminal"
yarn dlx create-turbo@latest -e design-system
```

</Tab>

<Tab value="npm">

```bash title="Terminal"
npx create-turbo@latest -e design-system
```

</Tab>

<Tab value="bun (Beta)">

```bash title="Terminal"
bunx create-turbo@latest -e design-system
```

</Tab>
</PackageManagerTabs>

## 가이드

<Steps>
<Step>

### monorepo 만들기

기존 프로젝트가 없는 경우, [create-turbo](/docs/getting-started/installation)를 사용하여 새 monorepo를 만듭니다:

<PackageManagerTabs>

<Tab value="pnpm">

```bash title="Terminal"
pnpm dlx create-turbo@latest
```

</Tab>

<Tab value="yarn">

```bash title="Terminal"
yarn dlx create-turbo@latest
```

</Tab>

<Tab value="npm">

```bash title="Terminal"
npx create-turbo@latest
```

</Tab>

<Tab value="bun (Beta)">

```bash title="Terminal"
bunx create-turbo@latest
```

</Tab>
</PackageManagerTabs>

</Step>

<Step>
### 앱용 디렉터리 생성

Storybook 애플리케이션용 디렉터리가 필요합니다:

```bash title="Terminal"
mkdir apps/storybook
cd apps/storybook
```

</Step>

<Step>
### Storybook 애플리케이션 추가

`apps/storybook` 디렉터리에서 새 Storybook 애플리케이션을 초기화합니다:

<PackageManagerTabs>

  <Tab value="pnpm">

```bash title="Terminal"
pnpm create storybook@latest
```

  </Tab>
  <Tab value="yarn">

```bash title="Terminal"
yarn create storybook@latest
```

  </Tab>

  <Tab value="npm">

```bash title="Terminal"
npm create storybook@latest
```

  </Tab>

  <Tab value="bun (Beta)">

```bash title="Terminal"
bun create storybook@latest
```

  </Tab>
</PackageManagerTabs>

프롬프트에 따라 애플리케이션을 만듭니다. 이 가이드의 나머지 부분에서는 React 및 TypeScript를 사용한다고 가정합니다.

<Callout type="good-to-know">
  Storybook의 온보딩을 완료한 후 [온보딩 애드온을
  제거](https://github.com/storybookjs/addon-onboarding/blob/main/README.md)할
  수 있습니다.
</Callout>

</Step>

<Step>
### Storybook에 UI 키트 추가

이제 UI 패키지를 Storybook에 설치합니다.

<PackageManagerTabs>

<Tab value="pnpm">

```bash title="Terminal"
pnpm add @repo/ui --filter=storybook
```

</Tab>

<Tab value="yarn">

```bash title="Terminal"
yarn workspace storybook add @repo/ui
```

</Tab>

<Tab value="npm">

```bash title="Terminal"
npm install @repo/ui --workspace=storybook
```

</Tab>

<Tab value="bun (Beta)">

```bash title="Terminal"
bun install @repo/ui --filter=storybook
```

</Tab>
</PackageManagerTabs>

</Step>

<Step>

### Button 컴포넌트에 대한 스토리 설정

Storybook 스캐폴딩 도구로 생성된 `src/stories`에서 스토리 및 컴포넌트를 삭제합니다. 직접 만들 것입니다.

예를 들어, `@repo/ui/button`의 `Button` 컴포넌트에 대한 스토리는 다음과 같습니다.

```tsx title="./apps/storybook/src/stories/Button.stories.tsx"
import type { Meta, StoryObj } from '@storybook/react';
import { Button } from '@repo/ui/button';

const meta = {
  title: 'Example/Button',
  component: Button,
  tags: ['autodocs'],
} satisfies Meta<typeof Button>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Primary: Story = {
  args: {
    appName: 'Button',
    children: 'I am a primary button.',
  },
};
```

</Step>
<Step>
###  작업에 스크립트 정렬

마지막으로, 새 Storybook 애플리케이션을 Turborepo에 통합합니다:

```json title="apps/storybook/package.json"
{
  "scripts": {
    "dev": "storybook dev -p 6006", // [!code highlight]
    "build": "storybook build" // [!code highlight]
  }
}
```

이제 이러한 스크립트는 `turbo.json`의 `turbo dev` 및 `turbo build` 작업과 함께 실행됩니다.

`build`를 실행할 때 파일 출력이 캐시되도록 하려면 `turbo.json` 빌드 작업의 출력에 `storybook-static`을 추가합니다:

```diff title="turbo.json"
{
  "tasks": {
    "build": {
      "outputs": [
        ".next/**",
        "!.next/cache/**"
+       "storybook-static/**"
      ]
    }
  }
}
```

<Step>

### Storybook 빌드 출력을 `.gitignore`에 추가

Storybook의 빌드 출력이 소스 제어에 커밋되지 않도록 합니다

```diff title=".gitignore"
+ storybook-static
```

</Step>

<Step>
### 구성 확인

`turbo build`를 실행하여 Storybook 애플리케이션과 나머지 애플리케이션을 함께 빌드합니다.

`turbo build`를 다시 실행하여 빌드에 대한 캐시 적중을 볼 수도 있습니다.

</Step>

</Step>
</Steps>

## 더 많은 팁

### 스토리 같은 위치 배치

스토리를 소스 코드와 함께 배치하려는 경우(Storybook 애플리케이션에 있는 대신), 몇 가지 추가 구성이 필요합니다.

<Steps>
<Step>
#### Re-configure Storybook sources

In `.storybook/main.ts`, change the `stories` paths in `config` to the directories you'd like to capture. For instance, if you'd like to write stories in the UI package:

```diff title="./apps/storybook/.storybook/main.ts"

const config = {
  stories: [
-   "../src/**/*.mdx",
-   "../src/**/*.stories.@(js|jsx|mjs|ts|tsx)"],
+   "../../../packages/ui/src/**/*.stories.@(js|jsx|mjs|ts|tsx)",
};
```

</Step>
<Step>
####  Move story files to the UI package

Following along with [the guide above](/docs/guides/tools/storybook#set-up-a-story-for-your-button-component), move the `./apps/storybook/src/stories/Button.stories.tsx` file to `./packages/ui/src/Button.stories.tsx`.

Update components imports so that they reference the now co-located modules. For instance, in the story's imports:

```diff title="./packages/ui/src/Button.stories.tsx"
- import { Button } from "@repo/ui/button";
+ import { Button } from "./button";
```

<Callout type="good-to-know">
  You may also need to update [absolute
  imports](/docs/guides/tools/typescript#use-nodejs-subpath-imports-instead-of-typescript-compiler-paths)
  according to your changes and usage.
</Callout>

You'll also need to install any Storybook packages required for writing stories. For example, moving the story from above would require that you install `@storybook/react` into your `@repo/ui` package.

<PackageManagerTabs>

<Tab value="pnpm">

```bash title="Terminal"
pnpm add @storybook/react --filter=@repo/ui --save-dev
```

</Tab>

<Tab value="yarn">

```bash title="Terminal"
yarn workspace @repo/ui add @storybook/react --dev
```

</Tab>

<Tab value="npm">

```bash title="Terminal"
npm install @storybook/react --workspace=@repo/ui --save-dev
```

</Tab>

<Tab value="bun (Beta)">

```bash title="Terminal"
bun install @storybook/react --filter=@repo/ui --save-dev
```

</Tab>
</PackageManagerTabs>

</Step>

<Step>
#### Configure caching

Because stories are now in the UI package, changes to those stories can cause cache misses for any builds that depend on your UI package. However, changing a story doesn't mean your production applications should miss cache.

To prevent this, exclude stories from the inputs to your `build` task in your root `turbo.json`. You'll also need to create a `build:storybook` task, which you'll need in a moment:

```json title="./turbo.json"
{
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "inputs": ["$TURBO_DEFAULT$", "!**/*.stories.{tsx,jsx,mdx}"], // [!code highlight]
      "outputs": [".next/**", "!.next/cache/**"]
    },
    "build:storybook": {} // [!code highlight]
  }
}
```

Additionally, create a [Package Configuration](/docs/reference/package-configurations) in the `storybook` application so stories are **accounted for in building the Storybook application, specifically**:

```json title="./apps/storybook/turbo.json"
{
  "extends": ["//"],
  "tasks": {
    "build:storybook": {
      "dependsOn": ["^build:storybook"],
      "outputs": ["storybook-static/**"]
    }
  }
}
```

<Callout type="good-to-know">
  If you are using the [Compiled Package
  pattern](/docs/core-concepts/internal-packages#compiled-packages), you may
  also need to add `^build` to your `dependsOn`.
</Callout>

</Step>
<Step>

#### Rename the build script

Last, make sure your script to build Storybook uses the configuration we just wrote by renaming it to the name of the task:

```json title="apps/storybook/package.json"
{
  "scripts": {
    "dev": "storybook dev -p 6006",
    "build:storybook": "storybook build" // [!code highlight]
  }
}
```

The script that was once `"build"` is now `"build:storybook"` to ensure the stories are included in hashes for caching.

</Step>

<Step>
#### Verify your configuration

To ensure your setup is correct:

1. Run `turbo build:storybook build`. You should see cache misses.
2. Run `turbo build:storybook build` again. You should see all cache hits.
3. Make a code change **to a story** in your `@repo/ui` package.
4. Run `turbo build:storybook build` again. You should **only** see a cache miss for the Storybook application. All others should hit cache.

</Step>

</Steps>

### Adding CSS

If your UI package exports its own CSS, you'll need to add it to the renders in the Storybook app, similar to how you would add it to your applications. [The Storybook documentation](https://storybook.js.org/docs/configure/styling-and-css#css) recommends you add it to the `.storybook/preview.ts` file.
