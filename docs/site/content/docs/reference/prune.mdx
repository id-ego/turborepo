---
title: prune
description: '`turbo prune` 명령어에 대한 API 레퍼런스'
---

import { File, Folder, Files } from '#components/files';

대상 패키지에 대한 부분 모노레포를 생성합니다. 출력은 다음을 포함하는 `out`이라는 디렉토리에 배치됩니다:

- 대상을 빌드하는 데 필요한 모든 내부 패키지의 전체 소스 코드.
- 대상을 빌드하는 데 필요한 원본 lockfile의 하위 집합을 포함하는 정리된 lockfile.
- 루트 `package.json`의 복사본.

```bash title="Terminal"
turbo prune [package]
```

### 예제

다음 구조의 저장소로 시작합니다:

<Files>
  <File name="package.json" />
  <File name="pnpm-lock.yaml" />
  <Folder name="apps" defaultOpen>
    <Folder name="admin">
      <File name="package.json" />
      <File name="next-env.d.ts" />
      <File name="next.config.js" />
      <Folder name="src">
        <Folder name="app">
          <File name="page.tsx" />
        </Folder>
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
    <Folder name="frontend">
      <File name="package.json" />
      <File name="next-env.d.ts" />
      <File name="next.config.js" />
      <Folder name="src">
        <Folder name="app">
          <File name="page.tsx" />
        </Folder>
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
  </Folder>
  <Folder name="packages" defaultOpen>
    <Folder name="scripts">
      <File name="package.json" />
      <Folder name="src">
        <File name="index.tsx" />
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
    <Folder name="shared">
      <File name="package.json" />
      <Folder name="src">
        <Folder name="__tests__">
          <File name="sum.test.ts" />
          <File name="tsconfig.json" />
        </Folder>
        <File name="index.ts" />
        <File name="sum.ts" />
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
    <Folder name="ui">
      <File name="package.json" />
      <Folder name="src">
        <File name="index.tsx" />
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
    <Folder name="utils">
      <File name="package.json" />
      <Folder name="src">
        <File name="index.tsx" />
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
  </Folder>
</Files>

`turbo prune frontend`를 실행하여 `out` 디렉토리에 `frontend` 애플리케이션에 대한 정리된 워크스페이스를 생성합니다:

<Files>
  <File name="package.json" />
  <File name="pnpm-lock.yaml (partial)" />
  <Folder name="apps" defaultOpen>
    <Folder name="frontend">
      <File name="package.json" />
      <File name="next-env.d.ts" />
      <File name="next.config.js" />
      <Folder name="src">
        <Folder name="app">
          <File name="page.tsx" />
        </Folder>
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
  </Folder>
  <Folder name="packages" defaultOpen>
    <Folder name="shared">
      <File name="package.json" />
      <Folder name="src">
        <Folder name="__tests__">
          <File name="sum.test.ts" />
          <File name="tsconfig.json" />
        </Folder>
        <File name="index.ts" />
        <File name="sum.ts" />
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
    <Folder name="ui">
      <File name="package.json" />
      <Folder name="src">
        <File name="index.tsx" />
      </Folder>
      <File name="tsconfig.json" />
    </Folder>
  </Folder>
</Files>

### 옵션

#### `--docker`

기본값: `false`.

[Docker 모범 사례 및 레이어 캐싱](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/)과 함께 사용하기 쉽도록 출력 디렉토리를 변경합니다. 디렉토리에는 다음이 포함됩니다:

- 정리된 워크스페이스의 `package.json` 파일이 있는 `json`이라는 폴더.
- 대상을 빌드하는 데 필요한 내부 패키지의 정리된 워크스페이스 전체 소스 코드가 있는 `full`이라는 폴더.
- 대상을 빌드하는 데 필요한 원본 lockfile의 하위 집합을 포함하는 정리된 lockfile.

위의 동일한 예제를 사용하여 `turbo prune frontend --docker`를 실행하면 다음이 생성됩니다:

<Files>
  <File name="pnpm-lock.yaml (partial)" />
  <Folder name="full" defaultOpen>
    <File name="package.json (from repo root)" />
    <Folder name="apps">
      <Folder name="frontend">
        <File name="package.json" />
        <File name="next-env.d.ts" />
        <File name="next.config.js" />
        <Folder name="src">
          <Folder name="app">
            <File name="page.tsx" />
          </Folder>
        </Folder>
        <File name="tsconfig.json" />
      </Folder>
    </Folder>
    <Folder name="packages">
      <Folder name="shared">
        <File name="package.json" />
        <Folder name="src">
          <Folder name="__tests__">
            <File name="sum.test.ts" />
            <File name="tsconfig.json" />
          </Folder>
          <File name="index.ts" />
          <File name="sum.ts" />
        </Folder>
        <File name="tsconfig.json" />
      </Folder>
      <Folder name="ui">
        <File name="package.json" />
        <Folder name="src">
          <File name="index.tsx" />
        </Folder>
        <File name="tsconfig.json" />
      </Folder>
    </Folder>
  </Folder>
  <Folder name="json" defaultOpen>
    <File name="package.json (from repo root)" />
    <Folder name="apps" defaultOpen>
      <Folder name="frontend" defaultOpen>
        <File name="package.json" />
      </Folder>
    </Folder>
    <Folder name="packages" defaultOpen>
      <Folder name="ui" defaultOpen>
        <File name="package.json" />
      </Folder>
      <Folder name="shared" defaultOpen>
        <File name="package.json" />
      </Folder>
    </Folder>

  </Folder>
</Files>

#### `--out-dir <path>`

기본값: `./out`.

정리된 출력이 생성되는 디렉토리를 사용자 정의합니다.

#### `--use-gitignore[=<bool>]`

기본값: `true`

출력 디렉토리로 파일을 복사할 때 `.gitignore` 파일을 준수합니다.

### `pnpm deploy`와의 비교

`turbo prune`와 [`pnpm deploy`](https://pnpm.io/cli/deploy) 모두 모노레포의 패키지를 격리하는 데 사용되지만 서로 다른 목적을 제공하고 다른 출력을 생성합니다.

`turbo prune`이 부분 모노레포를 생성하는 반면, `pnpm deploy`는 대상 패키지의 내용만 포함하는 디렉토리를 생성합니다.

`pnpm deploy`가 생성한 디렉토리에는 하드 링크된 내부 의존성이 있는 자체 포함된 `node_modules`가 있습니다.
이로 인해 서버에 직접 복사하여 추가 단계 없이 사용할 수 있는 이식 가능한 패키지가 생성됩니다.
저장소 구조는 유지되지 않는데, 이는 독립 실행형 배포 가능 패키지를 생성하는 데 중점을 두기 때문입니다.
